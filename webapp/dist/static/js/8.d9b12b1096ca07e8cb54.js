webpackJsonp([8],{1111:function(e,t,a){"use strict";function n(e){a(1159)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1162),s=a.n(i),r=a(1163),c=a(15),l=n,o=c(s.a,r.a,!1,l,"data-v-9ee70244",null);t.default=o.exports},1159:function(e,t,a){var n=a(1160);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(1103)("e954c49e",n,!0)},1160:function(e,t,a){t=e.exports=a(1102)(!1),t.i(a(1161),""),t.push([e.i,"",""])},1161:function(e,t,a){t=e.exports=a(1102)(!1),t.push([e.i,".search.normal-search{padding:0;border:1px solid #ccc;margin-bottom:12px;float:none}.normal-search .gsearch{display:none}.search.normal-search input{background:#fff;color:#444;border:0}.search.normal-search .clear-search{top:0;right:0;bottom:0}.search.normal-search .search-list{left:-1px;right:-1px}.search.normal-search input::-webkit-input-placeholder{text-align:left;color:#aaa}.search.normal-search input:-moz-placeholder,.search.normal-search input::-moz-placeholder{text-align:left;color:#aaa}.search.normal-search input:-ms-input-placeholder{text-align:left;color:#aaa}.concern_table .pas-table_body-append-wrapper{border-collapse:collapse}.myconcern_append{display:none}tr.myconcern_append td{height:33px;text-align:center;padding:7px 6px;line-height:17px;border:1px solid #ddd}#search-row{position:relative;margin:0 auto;height:22px}#search-row .add_in{width:100%}.add_li{padding:6px 12px;line-height:20px;cursor:pointer}.add_li:hover,.search-list .active{background:#eee}#search-row .add_ul{position:absolute;top:22px;z-index:9;text-align:left;background:#fff!important;display:none;border:1px solid #ddd;max-height:500px;overflow:auto;box-shadow:0 3px 6px #ddd}.table-common .next-ul{overflow:visible!important}.add-search-row{vertical-align:baseline}",""])},1162:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,i=a(231),s=a(358),r=(function(e){e&&e.__esModule}(s),e.pasUtils()),c=e.common();t.default={name:"myConcern",data:function(){return{searchResult:[],notHaveTitle:!1,basicInfoGrid:null,inputValue:{length:0},inputType:"myConcern",loading:null,cellmenu:null,index:-1,num:0}},computed:{basicInfo:function(){return n.$store.state.myConcern.basicInfo}},created:function(){n=this},mounted:function(){this.loadData()},destroyed:function(){this.destroy(),e(".OG-cell-options").remove()},methods:{loadData:function(){this.loading=!0,this.basicInfoGrid&&this.basicInfoGrid.kill(),this.basicInfoFun("AgPrt~UserFocused")},destroy:function(){this.basicInfoGrid&&this.basicInfoGrid.kill()},basicInfoFun:function(e){this.basicInfoGrid=og.views.analytics.griddata.loadGridData({name:og.api.rest.views.parame.myConcern.basicInfo,requestParam:{portfolio:e},otherParam:{isDepgraph:!0,visibleArea:r.getVisibleArea(".concern_table")},metaHandle:function(e){n.$store.commit({type:"myConcern/initBasicInfo",newVal:e}),n.basicInfo.splice(e.length-1,1)},dataHandle:this.handleBasicInfoData}),this.cellmenu=new com.hundsun.pas.common.gadgets.CellMenu('table[tabid="myConcernTable"] tr td[cell]',this.basicInfoGrid)},handleBasicInfoData:function(t){if(e.isArray(t)){for(var a=t[1],i=t[2],s=1;s<i.length;s++){var r=i[s].cells,c={},l=i[s].data_row;c.name=a[s].cells[0].value,c.securityId=a[s].cells[0].securityId;for(var o=0;o<r.length;o++){var d=r[o].col_name,u=r[o],h=u.h;c[d]=u,c[d].h=h}var p=c["Price Fluctuation"].value,m=c["Price Fluctuation Range"].value;c["Price Fluctuation"].value=p&&m?p+"（"+m+"）":p+m,this.$set(this.basicInfo,l-1,c)}this.$nextTick(function(){n.cellmenu&&n.cellmenu.updateGrid()})}this.loading=!1},openSearchRow:function(){e(this.$el).find("button.add-search-row").addClass("disabled"),e("tr.myconcern_append").slideDown(300)},closeSearchRow:function(){e(this.$el).find("button.add-search-row").removeClass("disabled"),e("tr.myconcern_append").slideUp(300),this.clearSearchRow()},deleteData:function(t){function a(e,t){for(var a=0;a<e.length;a++)t==e[a].securityId&&e.splice(a,1);return e}var n=e(t.target),i=n.attr("itemScode");if(!(i.indexOf("~")<0)){var s=i.split("~"),c=this;r.deleteSecurity(s,"myConcerns",function(t){0==t.msg_no?setTimeout(function(){a(c.basicInfo,i),e.showNotice("移除成功！")},300):e.showNotice("移除失败！","danger")})}},addVisit:function(t){var a=e(t.target),n=a.attr("itemScode"),i=a.html().replace(/&nbsp;/g,"");n&&c.reqLastVisit(n,i,2,"recent",this.$router)},handleInputBlur:function(){setTimeout(function(){e(".myconcern_append .search-list").hide()},200)},handleInputClick:function(t){e(".myconcern_append .search-ipt").addClass("focus").select(),e.trim(e(".myconcern_append .search-ipt").val()).length>0&&this.doSearch(e.trim(e(".myconcern_append .search-ipt").val()))},doSearch:function(t){var a=this;og.api.rest.searchtext.get({searchtext:t,stype:"0"}).pipe(function(t){var t=t.data,n=e(".myconcern_append #search-row .add_in").width();e.isArray(t)&&(a.searchResult=t[0]),a.notHaveTitle=0===a.searchResult.length&&e(".tit_w").css({width:n,background:"#eee"}),e(".myconcern_append .search-list").slideDown(200),a.index=-1,a.num=e(".myconcern_append .search-list").children("li:visible").length})},searchKeydown:function(t){38==t.which&&(t.preventDefault(),this.num>1&&(this.index=(this.index+this.num-1)%this.num,e(".myconcern_append .search-list").children("li").eq(this.index).hasClass("title")||(e(".myconcern_append .search-list").children("li").removeClass("active"),e(".myconcern_append .search-list").children("li").eq(this.index).addClass("active")))),40==t.which&&(t.preventDefault(),this.num>1&&(this.index=(this.index+this.num+1)%this.num,e(".myconcern_append .search-list").children("li").eq(this.index).hasClass("title")||(e(".myconcern_append .search-list").children("li").removeClass("active"),e(".myconcern_append .search-list").children("li").eq(this.index).addClass("active")))),13==t.which&&e(".myconcern_append .search-list").children("li.active").length>0&&this.selectResult(e(".myconcern_append .search-list").children("li.active")[0])},selectResult:function(t){var a=e(t),n=a.attr("s-code"),i=a.attr("s-name");this.myConcernAddFnc(n,i),e(".myconcern_append .search-list").slideUp(200),this.clearSearchRow()},myConcernAddFnc:function(t,a){var n=t.split("~");-1!=t.indexOf("~")&&n?(n[2]=a,n[3]="1"):(n[0]="FKSec",n[1]=t.substr(2)+t.substring(0,2),e.pasUtils().addLastVisit(n,"myConcerns",function(t){0==t.msg_no?e.showNotice("添加我的关注成功！"):e.showNotice("添加我的关注失败！")}))},watchInputValue:function(t){var a=e.trim(t.target.value);a.length>0?this.doSearch(a):e(".myconcern_append .search-list").slideUp(200)},clearSearchRow:function(){e(".myconcern_append .search-ipt").val(""),this.searchResult=[],this.notHaveTitle=!1,this.index=-1,this.num=0},cellClassName:function(e,t,a,n){if(n>0&&n<5){var s=e["Price Fluctuation"],r=void 0;return s&&(r=e["Price Fluctuation"].value),(0,i.priceColorFilter)(r)}}}}}).call(t,a(2))},1163:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"realTime concern",attrs:{"mounted-uid":"myConcern"}},[a("div",{staticClass:"search normal-search"},[a("common-search",{attrs:{sType:e.inputType}})],1),e._v(" "),a("button",{staticClass:"btn btn-primary break-but add-search-row",attrs:{type:"button"},on:{click:function(t){e.openSearchRow()}}},[e._v("新增\r\n    ")]),e._v(" "),a("div",{staticClass:"concern_table",staticStyle:{position:"absolute",top:"55px",left:"11px",width:"calc(100% - 20px)",height:"calc(100% - 65px)"}},[a("pas-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.basicInfo,grid:e.basicInfoGrid,"dep-id":"myConcernTable",width:"100%",height:"100%",sparkline:!0,colDrag:!1,resizable:!1,"cell-class-name":e.cellClassName}},[a("pas-table-column",{attrs:{dep:!1,resizable:!1,sparkline:!1,align:"center",label:"证券名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{cursor:"pointer"},attrs:{itemScode:t.row.data.securityId},on:{click:function(t){e.addVisit(t)}}},[e._v("\r\n                        "+e._s(t.row.data.name)+"\r\n                    ")])]}}])}),e._v(" "),a("pas-table-column",{attrs:{resizable:!1,prop:"Latest Price",align:"right",label:"当前价"}}),e._v(" "),a("pas-table-column",{attrs:{resizable:!1,prop:"Price Fluctuation",align:"right",label:"涨跌(幅)"}}),e._v(" "),a("pas-table-column",{attrs:{resizable:!1,prop:"Trade Volume",align:"right",label:"交易量(万手)"}}),e._v(" "),a("pas-table-column",{attrs:{resizable:!1,prop:"Trade Amount",align:"right",label:"成交额"}}),e._v(" "),a("pas-table-column",{attrs:{dep:!1,sparkline:!1,resizable:!1,label:"移除",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"fa fa-times",staticStyle:{"font-size":"16px",cursor:"pointer",color:"#666"},attrs:{itemId:t.row.data.id,itemScode:t.row.data.securityId},on:{click:function(t){e.deleteData(t)}}})]}}])}),e._v(" "),a("tr",{staticClass:"myconcern_append",attrs:{slot:"append"},slot:"append"},[a("td",{staticClass:"next-ul"},[a("div",{attrs:{id:"search-row"},on:{blur:function(t){e.handleInputBlur()}}},[a("input",{staticClass:"search-ipt add_in",attrs:{value:"",placeholder:"点击搜索股票"},on:{blur:function(t){e.handleInputBlur()},click:function(t){e.handleInputClick(t)},input:function(t){e.watchInputValue(t)},keydown:function(t){e.searchKeydown(t)}}}),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.inputValue.length>=0,expression:"inputValue.length >= 0"}],staticClass:"search-list add_ul"},[e._l(e.searchResult,function(t,n){return a("li",{key:n,staticClass:"add_li",attrs:{"s-code":t.code,"s-name":t.name},on:{click:function(t){e.selectResult(t.target)}}},[e._v("\r\n                                "+e._s(t.name)+"（"+e._s(t.code)+"）\r\n                            ")])}),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:e.notHaveTitle,expression:"notHaveTitle"}],staticClass:"title tit_w",staticStyle:{"text-align":"center"}},[e._v("无搜索结果")])],2)])]),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td",[a("i",{staticClass:"fa fa-times",staticStyle:{"font-size":"16px",cursor:"pointer",color:"#666"},on:{click:function(t){e.closeSearchRow()}}})])])],1)],1)])},i=[],s={render:n,staticRenderFns:i};t.a=s}});