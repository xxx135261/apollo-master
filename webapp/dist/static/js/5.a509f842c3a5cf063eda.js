webpackJsonp([5],{1108:function(t,a,i){"use strict";function e(t){i(1143)}Object.defineProperty(a,"__esModule",{value:!0});var s=i(1146),n=i.n(s),r=i(1147),l=i(15),o=e,c=l(n.a,r.a,!1,o,"data-v-0b04609e",null);a.default=c.exports},1143:function(t,a,i){var e=i(1144);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);i(1103)("41c9ffc8",e,!0)},1144:function(t,a,i){a=t.exports=i(1102)(!1),a.i(i(1145),""),a.push([t.i,"",""])},1145:function(t,a,i){a=t.exports=i(1102)(!1),a.push([t.i,".retreat_t{position:relative}.retreat_state{right:30px}.retreat_state,.vol_state{position:absolute;top:40px}.vol_state{right:20px}",""])},1146:function(module,exports,__webpack_require__){"use strict";(function($){Object.defineProperty(exports,"__esModule",{value:!0});var _vuex=__webpack_require__(229),moduleName="riskAnalysis",riskInfoGrid=null,varRankGrid=null,utils=$.pasUtils(),_self;exports.default={name:"riskAnalysis",data:function(){return{lineNum:0,data:"",activated:!0,loading1:null,loading2:null,loading3:null}},computed:(0,_vuex.mapState)(moduleName,{riskRankNotice:function(t){return t.riskRankNotice},riskInfo:function(t){return t.riskInfo},echartConfig1:function(t){return t.echartConfig1},echartConfig2:function(t){return t.echartConfig2},echartConfig3:function(t){return t.echartConfig3}}),created:function(){_self=this},mounted:function(){this.loadData()},activated:function(){this.activated=!0,this.chart&&this.chart.length>0&&this.chart.forEach(function(t){setTimeout(t.resize,0)})},deactivated:function(){this.activated=!1},destroyed:function(){this.destroy()},methods:{loadData:function(t,a){var i=t||this.$store.state.selectGroup.id;this.destroy(),void 0==a&&($(".riskChangeTime li").removeClass("sel"),$(".riskChangeTime li").eq(0).addClass("sel"));var e=this;setTimeout(function(){e.retreatEchartData.call(e,i,a||"1")},0),setTimeout(function(){e.valueListFun(i,a||"1")},300),setTimeout(function(){e.varRank(a||"1")},0);var s=["近一周","近一个月","近一个季度","近半年","近一年","今年"];this.riskInfo.times=s[a-1||0]},destroy:function(){riskInfoGrid&&riskInfoGrid.kill()},retreatEchartData:function(t,a){if(this.lineNum=0,this.loading1=!0,this.loading2=!0,this.loading3=!0,t&&og.analytics.echart.line)for(var i=og.analytics.echart.line.length;i-- >1;)og.analytics.echart.line[i].kill();og.analytics.echart.line=[];for(var e=this;this.lineNum++<6;)og.analytics.echart.line[this.lineNum]=new og.analytics.echart.Line({source:og.api.rest.views.parame.xhrArgs(og.api.rest.views.parame.riskAnalysis.retreatEchartData,{portfolio:t,calcTimeParam:a}),config:{scope:e,lineNum:e.lineNum}}).on("title",function(t){},e).on("data",e.loadLineData,e)},loadLineData:function(t){if(t instanceof Object){var a=t.timeseries.data.length,i=new Array(a),e=new Array(a);t.timeseries.data.reduce(function(t,a,i){return null==a?t:(t.$time[i]=new Date(a[0]).Format("yyyy-MM-dd"),t.$value[i]=a[1],t)},{$time:i,$value:e}),2==t.num?(this.chart[0].setOption({xAxis:[{data:i}],series:[{data:e}]}),this.loading1=!1):3==t.num?(this.chart[1].setOption({xAxis:[{data:i}],series:[{data:e}]}),this.loading2=!1):(this.chart[2].setOption({xAxis:[{data:i}],series:[{data:e}]}),this.loading3=!1);var s=this;setTimeout(function(){var a,i,n;a=Math.max.apply(Math,e),i=Math.min.apply(Math,e),a==i&&0===a?(i=-.1,a=.5):(a=a>0?1.1*a:.9*a,i=i>0?.9*i:1.1*i),n=(a-i)/6,2==t.num?s.chart[0].setOption({yAxis:[{axisLabel:{formatter:function(t){return t.toFixed(4)}},max:a,min:i,interval:n}]}):3==t.num?(s.chart[1].setOption({yAxis:[{axisLabel:{formatter:function(t){return t.toFixed(4)}},max:a,min:i,interval:n}]}),s.riskInfo.loss=Math.min.apply(Math,e).toString()):6==t.num&&s.chart[2].setOption({yAxis:[{axisLabel:{formatter:function(t){return(100*Number(t)).toFixed(4)+"%"}},max:a,min:i,interval:n}]})},200)}},valueListFun:function(t,a){var i=this;riskInfoGrid=og.views.analytics.griddata.loadGridData({name:og.api.rest.views.parame.riskAnalysis.valueList,requestParam:{portfolio:t,calcTimeParam:a},otherParam:{visibleArea:utils.getDefaultVisibleArea()},metaHandle:null,dataHandle:i.handleValueListData})},handleValueListData:function handleValueListData(result){for(var result_s=eval(result),scroll=result_s[0].scroll,i=0;i<scroll.length;i++){var col=scroll[i];"TIME_SERIES"!=col.type&&(this.riskInfo[col.col_name]=col.value)}"--"!=this.riskInfo.loss&&void 0!=this.riskInfo.loss&&null!=this.riskInfo.loss||(this.riskInfo.loss="0.00")},varRank:function(t){varRankGrid=og.views.analytics.griddata.loadGridData({name:og.api.rest.views.parame.riskAnalysis.varRank,requestParam:{calcTimeParam:t},otherParam:{visibleArea:{height:200,width:200,scrollHeight:0,scrollWidth:0,scrollTop:1,scrollLeft:1}},metaHandle:null,dataHandle:this.handleVaRRank})},handleVaRRank:function handleVaRRank(result){for(var result_s=eval(result),scode=this.$store.state.selectGroup.id,i=1;i<result_s.length;i++)if(scode==result_s[i].nodeId){var varRank=result_s[i].scroll[0].value;varRank=varRank.substr(0,varRank.length),varRank=parseFloat(varRank),this.riskRankNotice.notice=varRank-75>=0?"风险偏高":varRank-50>=0?"风险较高":varRank-25>=0?"风险适中":"风险偏低";break}},changeTime:function(t){var a=t.currentTarget;$(a).addClass("sel").siblings().removeClass("sel");var i=$(a).attr("value");this.$store.commit(moduleName+"/initRiskInfo"),this.$store.commit(moduleName+"/initRiskRankNotice"),this.loadData(null,i),this.date=i}}}}).call(exports,__webpack_require__(2))},1147:function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"realTime risk"},[i("div",{staticClass:"recent"},[i("div",{staticClass:"onemonth-select",staticStyle:{width:"100%","margin-top":"0px","margin-left":"0px"}},[i("ul",{staticClass:"change-time riskChangeTime"},[i("li",{staticClass:"sel",attrs:{value:"1"},on:{click:function(a){t.changeTime(a)}}},[t._v("近一周")]),t._v(" "),i("li",{attrs:{value:"2"},on:{click:function(a){t.changeTime(a)}}},[t._v("近一个月")]),t._v(" "),i("li",{attrs:{value:"3"},on:{click:function(a){t.changeTime(a)}}},[t._v("近一个季度")]),t._v(" "),i("li",{attrs:{value:"4"},on:{click:function(a){t.changeTime(a)}}},[t._v("近半年")]),t._v(" "),i("li",{attrs:{value:"6"},on:{click:function(a){t.changeTime(a)}}},[t._v("今年")])])]),t._v(" "),i("table",{staticClass:"notice_con"},[i("tbody",[i("tr",[i("td",[i("div",{staticClass:"top-notice"},[i("span",[t._v(t._s(t.riskInfo.times)+"投资组合的最大回撤为"),i("span",{staticClass:"blue-font"},[t._v(t._s(t.riskInfo.MaxDrawDown))]),t._v("；单日最大亏损为"),i("span",{staticClass:"blue-font"},[t._v(t._s(t.riskInfo.loss))]),t._v("；年化波动率为"),i("span",{staticClass:"blue-font"},[t._v(t._s(t.riskInfo.Stddev))]),t._v("；VaR值为"),i("span",{staticClass:"blue-font"},[t._v(t._s(t.riskInfo["Normal Var"]))]),t._v("，"+t._s(t.riskRankNotice.notice)+"。（同我的组合排名得出结论）")])])])])])])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-6 panel-left"},[i("div",{staticClass:"retreat-mostretreat retreat_t"},[i("div",{staticClass:"panel panel-default"},[t._m(0),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading1,expression:"loading1"}],staticClass:"panel-body",staticStyle:{"padding-bottom":"23px"}},[i("div",{directives:[{name:"echarts",rawName:"v-echarts"}],staticStyle:{width:"100%",height:"300px"},attrs:{id:"riskAnalysis_mostretChart",config:"echartConfig1"}})])]),t._v(" "),i("div",{staticClass:"retreat_state"},[i("ul",[i("li",[t._v("最大回撤："+t._s(t.riskInfo.MaxDrawDown))])])])])]),t._v(" "),i("div",{staticClass:"col-md-6 panel-right"},[i("div",{staticClass:"retreat_t"},[i("div",{staticClass:"panel panel-default"},[t._m(1),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading2,expression:"loading2"}],staticClass:"panel-body",staticStyle:{"padding-bottom":"23px"}},[i("div",{directives:[{name:"echarts",rawName:"v-echarts"}],staticStyle:{width:"100%",height:"300px"},attrs:{id:"riskAnalysis_dailyChart",config:"echartConfig2"}})])]),t._v(" "),i("div",{staticClass:"vol_state"},[t._v("年化波动率："+t._s(t.riskInfo.Stddev))])])])]),t._v(" "),i("div",{staticClass:"panel panel-default"},[t._m(2),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading3,expression:"loading3"}],staticClass:"panel-body",staticStyle:{"padding-bottom":"23px"}},[i("div",{directives:[{name:"echarts",rawName:"v-echarts"}],staticStyle:{width:"100%",height:"300px"},attrs:{id:"riskAnalysis_varChart",config:"echartConfig3"}})])])])},s=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"panel-heading"},[i("div",{staticClass:"panel-title"},[t._v("最大回撤")])])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"panel-heading"},[i("div",{staticClass:"panel-title"},[t._v("收益稳定性")])])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"panel-heading"},[i("div",{staticClass:"panel-title"},[t._v("VaR分析")])])}],n={render:e,staticRenderFns:s};a.a=n}});